:root {
	--menu__transition-duration: .25s;
}

.menu {
	--menu__min-width: 15rem;

	/* Position */
	margin-top: .5rem;
	min-width: fit-content;

	/* Appearance */
	background: var(--panel__background-color);
	background: var(--panel__background);
	border: 1px solid var(--panel__border-color);
	border-radius: var(--menu__border-radius);
	box-shadow: var(--menu__shadow);

	/* Anchor */
	position: absolute;
	inset: auto;
	top: anchor(bottom);
	left: anchor(left);
	position-try-fallbacks: flip-block;

	&.match-anchor-width {
		width: max(var(--menu__min-width), anchor-size(width));
	}
}
 
.menu.modal::backdrop {
	--menu-backdrop__blur: 0;
	--menu-backdrop__opacity: 0;

	backdrop-filter: blur(var(--menu-backdrop__blur));
	background-color: rgb(0 0 0 / var(--menu-backdrop__opacity));

	transition-behavior: allow-discrete;
	transition-duration: var(--menu__transition-duration);
	transition-property: backdrop-filter, background-color, display, overlay;
	transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
}

.menu.modal:popover-open::backdrop {
	--menu-backdrop__blur: .5px;
	--menu-backdrop__opacity: 25%;
}

@starting-style {
	.menu.modal:popover-open::backdrop {
		--menu-backdrop__blur: 0;
		--menu-backdrop__opacity: 0;
	}
}
