:where(.theme-neomorphism) {
	/*
		All buttons
	*/
	.button-cta,
	.button-outlined,
	.button-plain {
		--focus__shadow: 0 0 1px 1px var(--palette__accent-color);

		/* Layout */
		height: var(--button__height);

		/* Interaction */
		padding-block: 1px;

		/* Focus */
		&.button--pseudo-focus,
		&:focus-visible,
		&:has(:focus-visible) {
			--button__focus-shadow: var(--focus__shadow);

			/* Ensure focus shadow is not hidden by siblings */
			z-index: 1;
		}

		/* Pressed */
		&:is([aria-checked], [aria-current], [aria-selected]),
		&:active:not([aria-disabled], :has(:disabled)) {
			padding-block: 2px 0px;
		}

		/* Disabled */
		&:is([aria-disabled], :has(:disabled)) {
			--button-shadow: 0 .75px 2px -1px rgb(0 0 0 / 20%);
		}
	}

	.button-cta {
		--button-shadow: 0 1px 2px rgb(0 0 0 / 20%);

		color: var(--palette__text--inverted);
		background-color: var(--palette__accent-background);
		background-image: linear-gradient(to bottom, rgb(255 255 255 / 10%), rgb(0 0 0 / 10%));
		box-shadow:
			var(--button-shadow),
			var(--button__focus-shadow, 0 0 #0000);
		
		/* Pressed */
		&:is([aria-checked], [aria-current], [aria-selected]),
		&:active:not([aria-disabled], :has(:disabled)) {
			background-image: linear-gradient(to bottom, rgb(255 255 255 / 4%), rgb(0 0 0 / 4%));
			box-shadow:
				var(--field__shadow),
				var(--button__focus-shadow, 0 0 #0000);
		}

		/* Hover */
		&.button--hover,
		:where(.supports-hover) &:hover:where(:not([aria-current], [aria-disabled], :has(:disabled))) {
			background-color: hsl(from var(--palette__accent-background) h s calc(l * .8));
		}
	}

	/*
		Outlined
	*/
	.button-outlined {
		--button-shadow:
			0 1px 1px 0px rgb(0 0 0 / 15%),
			1px 0 1px 0px rgb(0 0 0 / 3%),
			-1px 0 1px 0px rgb(0 0 0 / 3%);

		.scheme-dark & {
			--button__background-color: color-mix(in lab, var(--panel__background-color), var(--palette__contrast) 8%);
			--button__background-color--hover: color-mix(in lab, var(--panel__background-color), var(--palette__contrast) 2%);
		}

		.scheme-light & {
			--button__background-color: #f8f8f8;
			--button__background-color--hover: #f2f2f2;
		}

		color: var(--palette__accent-color);
		background-color: var(--button__background-color);
		background-image: linear-gradient(to bottom, rgb(255 255 255 / 10%), rgb(0 0 0 / 4%));
		box-shadow:
			var(--button-shadow),
			var(--button__focus-shadow, 0 0 #0000);

		/* Pressed */
		&:is([aria-checked], [aria-current], [aria-selected]),
		&:active:not([aria-disabled], :has(:disabled)) {
			color: var(--palette__accent-contrast);
			background-image: linear-gradient(to bottom, rgb(255 255 255 / 2%), rgb(0 0 0 / 2%));
			box-shadow:
				var(--field__shadow),
				var(--button__focus-shadow, 0 0 #0000);
		}

		/* Selected */
		&:is([aria-checked], [aria-current], [aria-selected]) {
			background-color: var(--palette__accent-color--bright);
		}

		/* Hover */
		&.button--hover,
		:where(.supports-hover) &:hover:where(:not([aria-current], [aria-disabled], :has(:disabled))) {
			--button__background-color:  var(--button__background-color--hover);
			color: var(--palette__accent-contrast);
		}
	}

	/*
		Plain
	*/
	.button-plain {
		color: var(--palette__accent-color);
		box-shadow: var(--button__focus-shadow, 0 0 #0000);

		.button-text:has(+ .button-icon) {
			color: var(--palette__text);
		}

		/* Hover */
		&.button--hover,
		:where(.supports-hover) &:hover:where(:not([aria-current], [aria-disabled], :has(:disabled))) {
			color: var(--palette__accent-contrast);

			.button-text:has(+ .button-icon) {
				color: var(--palette__text--contrast);
			}
		}
	}

	/*
		Variants
	*/
	.button--small {
		height: var(--button__height--small);
	}
}
